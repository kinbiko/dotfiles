{"_id":"promise-queue","_rev":"19-6c094068b1a4371ea5486b8885bf426f","name":"promise-queue","description":"Promise-based queue","dist-tags":{"latest":"2.2.2"},"versions":{"1.0.0":{"author":{"name":"Mikhail Davydov","email":"i@azproduction.ru"},"description":"Promise-based queue","name":"promise-queue","version":"1.0.0","contributors":[{"name":"Mikhail Davydov","email":"i@azproduction.ru"}],"engines":{"node":">= 0.8.0"},"dependencies":{},"devDependencies":{"jshint":"2.1.3","mocha":"1.11.0","jscs":"1.0.0","istanbul":"0.1.39","chai":"*","sinon":"*","vow":"*","sinon-chai":"*","mocha-istanbul":"*","coveralls":"*"},"scripts":{"test":"make validate","lint":"make lint","coverage":"make coverage","clean":"make clean"},"_id":"promise-queue@1.0.0","dist":{"shasum":"70f141d3be5d7ef3eac0ebb00f632ce60e813739","tarball":"http://registry.npmjs.org/promise-queue/-/promise-queue-1.0.0.tgz"},"_from":".","_npmVersion":"1.3.14","_npmUser":{"name":"azproduction","email":"azazel.private@gmail.com"},"maintainers":[{"name":"azproduction","email":"azazel.private@gmail.com"}],"directories":{}},"1.0.1":{"author":{"name":"Mikhail Davydov","email":"i@azproduction.ru"},"description":"Promise-based queue","name":"promise-queue","version":"1.0.1","contributors":[{"name":"Mikhail Davydov","email":"i@azproduction.ru"}],"engines":{"node":">= 0.8.0"},"dependencies":{},"devDependencies":{"jshint":"2.1.3","mocha":"1.11.0","jscs":"1.0.0","istanbul":"0.1.39","chai":"*","sinon":"*","vow":"*","sinon-chai":"*","mocha-istanbul":"*","coveralls":"*"},"scripts":{"test":"make validate","lint":"make lint","coverage":"make coverage","clean":"make clean"},"_id":"promise-queue@1.0.1","dist":{"shasum":"b6fbb1e6127bc06417a88b2c50aba0a46ee50634","tarball":"http://registry.npmjs.org/promise-queue/-/promise-queue-1.0.1.tgz"},"_from":".","_npmVersion":"1.2.11","_npmUser":{"name":"azproduction","email":"azazel.private@gmail.com"},"maintainers":[{"name":"azproduction","email":"azazel.private@gmail.com"}],"directories":{}},"2.0.0":{"author":{"name":"Mikhail Davydov","email":"i@azproduction.ru"},"description":"Promise-based queue","name":"promise-queue","version":"2.0.0","contributors":[{"name":"Mikhail Davydov","email":"i@azproduction.ru"}],"engines":{"node":">= 0.8.0"},"devDependencies":{"jshint":"2.1.3","mocha":"1.11.0","jscs":"1.0.0","istanbul":"0.1.39","chai":"*","sinon":"*","vow":"0.4.1","sinon-chai":"*","mocha-istanbul":"*","coveralls":"*"},"scripts":{"test":"make validate","lint":"make lint","coverage":"make coverage","clean":"make clean"},"_id":"promise-queue@2.0.0","dist":{"shasum":"6cb54f65a06f80f67d55aa9d5288cbe5e625718a","tarball":"http://registry.npmjs.org/promise-queue/-/promise-queue-2.0.0.tgz"},"_from":".","_npmVersion":"1.2.30","_npmUser":{"name":"azproduction","email":"azazel.private@gmail.com"},"maintainers":[{"name":"azproduction","email":"azazel.private@gmail.com"}],"directories":{}},"2.0.1":{"author":{"name":"Mikhail Davydov","email":"i@azproduction.ru"},"description":"Promise-based queue","name":"promise-queue","version":"2.0.1","contributors":[{"name":"Mikhail Davydov","email":"i@azproduction.ru"}],"repository":{"type":"git","url":"git://github.com/azproduction/promise-queue.git"},"engines":{"node":">= 0.8.0"},"devDependencies":{"jshint":"2.1.3","mocha":"1.11.0","jscs":"1.0.0","istanbul":"0.1.39","chai":"*","sinon":"*","vow":"0.4.1","sinon-chai":"*","mocha-istanbul":"*","coveralls":"*"},"scripts":{"test":"make validate","lint":"make lint","coverage":"make coverage","clean":"make clean"},"gitHead":"08a987e84bed5b84b099b725fe20fef684788807","bugs":{"url":"https://github.com/azproduction/promise-queue/issues"},"homepage":"https://github.com/azproduction/promise-queue","_id":"promise-queue@2.0.1","_shasum":"253b3378071245d389b6623d61479a64c52c1f0a","_from":".","_npmVersion":"1.4.18","_npmUser":{"name":"azproduction","email":"azazel.private@gmail.com"},"maintainers":[{"name":"azproduction","email":"azazel.private@gmail.com"}],"dist":{"shasum":"253b3378071245d389b6623d61479a64c52c1f0a","tarball":"http://registry.npmjs.org/promise-queue/-/promise-queue-2.0.1.tgz"},"directories":{}},"2.1.1":{"author":{"name":"Mikhail Davydov","email":"i@azproduction.ru"},"description":"Promise-based queue","name":"promise-queue","version":"2.1.1","contributors":[{"name":"Mikhail Davydov","email":"i@azproduction.ru"}],"repository":{"type":"git","url":"git://github.com/azproduction/promise-queue.git"},"engines":{"node":">= 0.8.0"},"devDependencies":{"jshint":"2.1.3","mocha":"1.11.0","jscs":"1.0.0","istanbul":"0.1.39","chai":"*","sinon":"*","vow":"0.4.1","sinon-chai":"*","mocha-istanbul":"*","coveralls":"*"},"scripts":{"test":"make validate","lint":"make lint","coverage":"make coverage","clean":"make clean"},"gitHead":"76a54693ad269ded1dc1f33564080b44bdefd705","bugs":{"url":"https://github.com/azproduction/promise-queue/issues"},"homepage":"https://github.com/azproduction/promise-queue","_id":"promise-queue@2.1.1","_shasum":"c979cc790b575937bd4873da9c4e7747078ab298","_from":".","_npmVersion":"1.4.18","_npmUser":{"name":"azproduction","email":"azazel.private@gmail.com"},"maintainers":[{"name":"azproduction","email":"azazel.private@gmail.com"}],"dist":{"shasum":"c979cc790b575937bd4873da9c4e7747078ab298","tarball":"http://registry.npmjs.org/promise-queue/-/promise-queue-2.1.1.tgz"},"directories":{}},"2.1.2":{"author":{"name":"Mikhail Davydov","email":"i@azproduction.ru"},"description":"Promise-based queue","name":"promise-queue","version":"2.1.2","contributors":[{"name":"Mikhail Davydov","email":"i@azproduction.ru"}],"repository":{"type":"git","url":"git://github.com/azproduction/promise-queue.git"},"engines":{"node":">= 0.8.0"},"devDependencies":{"jshint":"2.1.3","mocha":"1.11.0","jscs":"1.0.0","istanbul":"0.1.39","chai":"*","sinon":"*","vow":"0.4.1","sinon-chai":"*","mocha-istanbul":"*","coveralls":"*"},"scripts":{"test":"make validate","lint":"make lint","coverage":"make coverage","clean":"make clean"},"gitHead":"e61a41fbfc15431e2c30621fa6d3465ff6c0c461","bugs":{"url":"https://github.com/azproduction/promise-queue/issues"},"homepage":"https://github.com/azproduction/promise-queue#readme","_id":"promise-queue@2.1.2","_shasum":"fa6b00c77ac350fa494ed4acc162047d73bbfa2c","_from":".","_npmVersion":"2.12.1","_nodeVersion":"0.12.6","_npmUser":{"name":"azproduction","email":"azazel.private@gmail.com"},"dist":{"shasum":"fa6b00c77ac350fa494ed4acc162047d73bbfa2c","tarball":"http://registry.npmjs.org/promise-queue/-/promise-queue-2.1.2.tgz"},"maintainers":[{"name":"azproduction","email":"azazel.private@gmail.com"}],"directories":{}},"2.2.0":{"author":{"name":"Mikhail Davydov","email":"i@azproduction.ru"},"description":"Promise-based queue","name":"promise-queue","version":"2.2.0","contributors":[{"name":"Mikhail Davydov","email":"i@azproduction.ru"}],"repository":{"type":"git","url":"git://github.com/azproduction/promise-queue.git"},"engines":{"node":">= 0.8.0"},"devDependencies":{"jshint":"2.1.3","mocha":"1.11.0","jscs":"1.0.0","istanbul":"0.1.39","chai":"*","sinon":"*","vow":"0.4.1","sinon-chai":"*","mocha-istanbul":"*","coveralls":"*"},"scripts":{"test":"make validate","lint":"make lint","coverage":"make coverage","clean":"make clean"},"gitHead":"d8f34663beeab754559419f3d9a1d8efcac4a1d9","bugs":{"url":"https://github.com/azproduction/promise-queue/issues"},"homepage":"https://github.com/azproduction/promise-queue","_id":"promise-queue@2.2.0","_shasum":"39c341c6db495c83c11c9f140ad1111a1df46fe3","_from":".","_npmVersion":"2.7.1","_nodeVersion":"1.6.1","_npmUser":{"name":"azproduction","email":"azazel.private@gmail.com"},"maintainers":[{"name":"azproduction","email":"azazel.private@gmail.com"}],"dist":{"shasum":"39c341c6db495c83c11c9f140ad1111a1df46fe3","tarball":"http://registry.npmjs.org/promise-queue/-/promise-queue-2.2.0.tgz"},"directories":{}},"2.2.1":{"author":{"name":"Mikhail Davydov","email":"i@azproduction.ru"},"description":"Promise-based queue","name":"promise-queue","version":"2.2.1","contributors":[{"name":"Mikhail Davydov","email":"i@azproduction.ru"}],"repository":{"type":"git","url":"git://github.com/azproduction/promise-queue.git"},"engines":{"node":">= 0.8.0"},"devDependencies":{"jshint":"2.1.3","mocha":"1.11.0","jscs":"1.0.0","istanbul":"0.1.39","chai":"*","sinon":"*","vow":"0.4.1","sinon-chai":"*","mocha-istanbul":"*","coveralls":"*"},"scripts":{"test":"make validate","lint":"make lint","coverage":"make coverage","clean":"make clean"},"gitHead":"f26fbd598f744786c1eb1ec461b3266a44e6d065","bugs":{"url":"https://github.com/azproduction/promise-queue/issues"},"homepage":"https://github.com/azproduction/promise-queue#readme","_id":"promise-queue@2.2.1","_shasum":"a36802085db473ca660738a923124a9a24974a96","_from":".","_npmVersion":"2.14.11","_nodeVersion":"5.1.0","_npmUser":{"name":"azproduction","email":"azazel.private@gmail.com"},"dist":{"shasum":"a36802085db473ca660738a923124a9a24974a96","tarball":"http://registry.npmjs.org/promise-queue/-/promise-queue-2.2.1.tgz"},"maintainers":[{"name":"azproduction","email":"azazel.private@gmail.com"}],"directories":{}},"2.2.2":{"author":{"name":"Mikhail Davydov","email":"i@azproduction.ru"},"description":"Promise-based queue","name":"promise-queue","version":"2.2.2","contributors":[{"name":"Mikhail Davydov","email":"i@azproduction.ru"}],"repository":{"type":"git","url":"git://github.com/azproduction/promise-queue.git"},"engines":{"node":">= 0.8.0"},"devDependencies":{"jshint":"2.1.3","mocha":"1.11.0","jscs":"1.0.0","istanbul":"0.1.39","chai":"*","sinon":"*","vow":"0.4.1","sinon-chai":"*","mocha-istanbul":"*","coveralls":"*"},"scripts":{"test":"make validate","lint":"make lint","coverage":"make coverage","clean":"make clean"},"gitHead":"fcc5d376fa83afdf543927ee02204515e838a39c","bugs":{"url":"https://github.com/azproduction/promise-queue/issues"},"homepage":"https://github.com/azproduction/promise-queue#readme","_id":"promise-queue@2.2.2","_shasum":"650d891465dd75de47bc77396f3e675a487439b5","_from":".","_npmVersion":"2.14.11","_nodeVersion":"5.1.0","_npmUser":{"name":"azproduction","email":"azazel.private@gmail.com"},"dist":{"shasum":"650d891465dd75de47bc77396f3e675a487439b5","tarball":"http://registry.npmjs.org/promise-queue/-/promise-queue-2.2.2.tgz"},"maintainers":[{"name":"azproduction","email":"azazel.private@gmail.com"}],"directories":{}}},"readme":"# promise-queue [![NPM Version](https://badge.fury.io/js/promise-queue.png)](https://npmjs.org/package/promise-queue) [![Build Status](https://travis-ci.org/azproduction/promise-queue.png?branch=master)](https://travis-ci.org/azproduction/promise-queue) [![Coverage Status](https://coveralls.io/repos/azproduction/promise-queue/badge.png?branch=master)](https://coveralls.io/r/azproduction/promise-queue) [![Dependency Status](https://gemnasium.com/azproduction/promise-queue.png)](https://gemnasium.com/azproduction/promise-queue)\n\nPromise-based queue\n\n## Installation\n\n`promise-queue` can be installed using `npm`:\n\n```\nnpm install promise-queue\n```\n\n## Interface\n\n - `new Queue(Number maxConcurrent, Number maxQueued): Queue`\n - `Queue#add(Function generator): Promise` - adds function argument that generates a promise to the queue\n - `Queue#getQueueLength(): Number` - returns current length of buffer(added but not started promise generators) `it <= maxQueued`\n - `Queue#getPendingLength(): Number` - returns number of pending(concurrently running) promises `it <= maxConcurrent`\n\n## Example\n\n### Configure queue\n\nBy default `Queue` tries to use global Promises, but you can specify your own promises.\n\n```js\nQueue.configure(require('vow').Promise);\n```\n\nOr use old-style promises approach:\n\n```js\nQueue.configure(function (handler) {\n    var dfd = $.Deferred();\n    try {\n        handler(dfd.resolve, dfd.reject, dfd.notify);\n    } catch (e) {\n        dfd.reject(e);\n    }\n    return dfd.promise();\n});\n```\n\n### Queue one by one example\n\n```js\nvar maxConcurrent = 1;\nvar maxQueue = Infinity;\nvar queue = new Queue(maxConcurrent, maxQueue);\n\napp.get('/version/:user/:repo', function (req, res, next) {\n    queue.add(function () {\n        // Assume that this action is a way too expensive\n        // Call of this function will be delayed on second request\n        return downloadTarballFromGithub(req.params);\n    })\n    .then(parseJson('package.json'))\n    .then(function (package) {\n        res.send(package.version);\n    })\n    .catch(next);\n});\n```\n\n### Getting number of pending promises and queue(buffered promises) length\n\n```js\nvar maxConcurrent = 1;\nvar maxQueue = 1;\nvar queue = new Queue(maxConcurrent, maxQueue);\n\nqueue.add(function () {\n    queue.getQueueLength() === 0;\n    queue.getPendingLength() === 1;\n    return somePromise();\n});\n\nqueue.add(function () {\n    queue.getQueueLength() === 0;\n    queue.getPendingLength() === 0;\n    return somePromise();\n});\n\nqueue.getQueueLength() === 1;\nqueue.getPendingLength() === 1;\n```\n\n[Live example](http://jsfiddle.net/RVuEU/1/)\n","maintainers":[{"name":"azproduction","email":"azazel.private@gmail.com"}],"time":{"modified":"2016-01-05T16:53:27.612Z","created":"2013-12-16T11:37:36.304Z","1.0.0":"2013-12-16T11:37:40.498Z","1.0.1":"2014-02-19T12:42:55.117Z","2.0.0":"2014-03-09T18:33:44.178Z","2.0.1":"2014-07-09T09:20:17.303Z","2.1.1":"2014-07-09T12:26:21.074Z","2.1.2":"2015-10-30T08:56:12.275Z","2.2.0":"2015-11-24T19:47:38.859Z","2.2.1":"2016-01-05T16:39:40.653Z","2.2.2":"2016-01-05T16:53:27.612Z"},"author":{"name":"Mikhail Davydov","email":"i@azproduction.ru"},"readmeFilename":"README.md","contributors":[{"name":"Mikhail Davydov","email":"i@azproduction.ru"}],"homepage":"https://github.com/azproduction/promise-queue#readme","repository":{"type":"git","url":"git://github.com/azproduction/promise-queue.git"},"bugs":{"url":"https://github.com/azproduction/promise-queue/issues"},"users":{"kornel":true,"leiquan":true,"movibe":true},"_attachments":{},"_etag":"\"6KAIQSPJ2J0J2Z5NR5VZ2CI2K\""}